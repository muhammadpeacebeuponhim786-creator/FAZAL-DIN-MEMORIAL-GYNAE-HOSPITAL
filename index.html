<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hospital Lab Tests</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f4f7fb;
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    header img {
      width: 80px;
      margin-bottom: 10px;
    }
    header h1 {
      margin: 0;
      font-size: 28px;
      color: #2a4d69;
    }
    header p {
      margin: 3px 0;
      font-size: 14px;
      color: #555;
    }
    .search-box {
      margin-bottom: 15px;
      text-align: center;
    }
    .search-box input {
      padding: 8px;
      width: 60%;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
      background: #fff;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: left;
    }
    th {
      background: #2a4d69;
      color: #fff;
    }
    td label {
      display: flex;
      justify-content: space-between;
      width: 100%;
    }
    .selected-list {
      margin: 15px 0;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: #fff;
    }
    .selected-list h3 {
      margin: 0 0 8px 0;
      font-size: 16px;
      color: #2a4d69;
    }
    .selected-list ul {
      margin: 0;
      padding-left: 18px;
    }
    .total {
      font-weight: bold;
      margin-top: 10px;
      font-size: 18px;
      color: #222;
    }
    .buttons {
      margin-top: 15px;
      text-align: center;
    }
    .buttons button {
      margin: 5px;
      padding: 10px 20px;
      cursor: pointer;
      border: none;
      border-radius: 5px;
      font-size: 14px;
      font-weight: bold;
      background: #2a4d69;
      color: white;
      transition: 0.3s;
    }
    .buttons button:hover {
      background: #41729f;
    }
  </style>
</head>
<body>
  <header>
    <!-- Replace "logo.png" with your hospital logo -->
    <img src="https://via.placeholder.com/80" alt="Hospital Logo">
    <h1>CityCare Gynae Hospital</h1>
    <p>123 Main Street, New Delhi, India</p>
    <p>üìû +91 98765 43210 | ‚úâÔ∏è info@citycarehospital.com</p>
    <p id="todayDate"></p>
  </header>

  <div class="search-box">
    <input type="text" id="search" placeholder="üîç Search tests...">
  </div>

  <table id="testsTable">
    <thead>
      <tr>
        <th>Select</th>
        <th>Test & Amount</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><input type="checkbox" class="test" data-price="200"></td>
        <td><label>Blood Test <span>‚Çπ200</span></label></td>
      </tr>
      <tr>
        <td><input type="checkbox" class="test" data-price="500"></td>
        <td><label>Urine Test <span>‚Çπ500</span></label></td>
      </tr>
      <tr>
        <td><input type="checkbox" class="test" data-price="800"></td>
        <td><label>X-Ray <span>‚Çπ800</span></label></td>
      </tr>
      <tr>
        <td><input type="checkbox" class="test" data-price="1500"></td>
        <td><label>MRI Scan <span>‚Çπ1500</span></label></td>
      </tr>
      <tr>
        <td><input type="checkbox" class="test" data-price="300"></td>
        <td><label>ECG <span>‚Çπ300</span></label></td>
      </tr>
      <tr>
        <td><input type="checkbox" class="test" data-price="1000"></td>
        <td><label>Ultrasound <span>‚Çπ1000</span></label></td>
      </tr>
    </tbody>
  </table>

  <div class="selected-list" id="selectedList" style="display:none;">
    <h3>Selected Tests:</h3>
    <ul id="listItems"></ul>
  </div>

  <div class="total">Total: ‚Çπ<span id="total">0</span></div>

  <div class="buttons">
    <button onclick="printPage()">üñ®Ô∏è Print Receipt</button>
    <button onclick="downloadPDF()">üìÑ Download PDF</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const checkboxes = document.querySelectorAll('.test');
    const totalEl = document.getElementById('total');
    const searchBox = document.getElementById('search');
    const table = document.getElementById('testsTable').getElementsByTagName('tbody')[0];
    const selectedListDiv = document.getElementById('selectedList');
    const listItems = document.getElementById('listItems');
    const todayDate = document.getElementById('todayDate');

    // Show today's date
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    todayDate.textContent = "Date: " + new Date().toLocaleDateString(undefined, options);

    function updateSummary() {
      let total = 0;
      listItems.innerHTML = "";
      let hasSelection = false;

      checkboxes.forEach(c => {
        if (c.checked) {
          total += parseFloat(c.dataset.price);
          const label = c.parentElement.nextElementSibling.innerText;
          const li = document.createElement("li");
          li.textContent = label;
          listItems.appendChild(li);
          hasSelection = true;
        }
      });

      totalEl.textContent = total;
      selectedListDiv.style.display = hasSelection ? "block" : "none";
    }

    // Update summary on checkbox change
    checkboxes.forEach(cb => cb.addEventListener('change', updateSummary));

    // Search filter
    searchBox.addEventListener('keyup', () => {
      const filter = searchBox.value.toLowerCase();
      const rows = table.getElementsByTagName('tr');
      for (let row of rows) {
        const text = row.innerText.toLowerCase();
        row.style.display = text.includes(filter) ? '' : 'none';
      }
    });

    // Print receipt
    function printPage() {
      window.print();
    }

    // Download PDF receipt
    async function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      // Hospital Header
      doc.setFontSize(18);
      doc.text("CityCare Gynae Hospital", 60, 20);
      doc.setFontSize(11);
      doc.text("123 Main Street, New Delhi, India", 10, 30);
      doc.text("Phone: +91 98765 43210 | Email: info@citycarehospital.com", 10, 37);
      doc.text(todayDate.textContent, 10, 45);

      // Title
      doc.setFontSize(14);
      doc.text("Receipt - Selected Tests", 10, 60);

      // List of tests
      let y = 75;
      checkboxes.forEach(cb => {
        if (cb.checked) {
          const label = cb.parentElement.nextElementSibling.innerText;
          doc.text(label, 10, y);
          y += 10;
        }
      });

      // Total
      doc.setFontSize(14);
      doc.text("Total: ‚Çπ" + totalEl.textContent, 10, y + 10);

      doc.save("Hospital_Receipt.pdf");
    }
  </script>
</body>
</html>